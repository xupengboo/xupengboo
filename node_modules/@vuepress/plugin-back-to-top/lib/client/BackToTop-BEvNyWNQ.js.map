{"version":3,"file":"BackToTop-BEvNyWNQ.js","sources":["../../src/client/components/BackToTop.ts"],"sourcesContent":["import type { ExactLocaleConfig } from '@vuepress/helper/client'\nimport { useLocaleConfig } from '@vuepress/helper/client'\nimport { useElementSize, useWindowScroll, useWindowSize } from '@vueuse/core'\nimport {\n  Transition,\n  computed,\n  defineComponent,\n  h,\n  onMounted,\n  shallowRef,\n} from 'vue'\nimport { usePageFrontmatter } from 'vuepress/client'\nimport type { BackToTopPluginLocaleData } from '../../shared/index.js'\n\nimport '../styles/back-to-top.css'\n\ndeclare const __BACK_TO_TOP_LOCALES__: ExactLocaleConfig<BackToTopPluginLocaleData>\ndeclare const __BACK_TO_TOP_PROGRESS__: boolean\ndeclare const __BACK_TO_TOP_THRESHOLD__: number\n\nexport const BackToTop = defineComponent({\n  name: 'BackToTop',\n\n  setup() {\n    const pageFrontmatter = usePageFrontmatter<{ backToTop?: boolean }>()\n    const locale = useLocaleConfig(__BACK_TO_TOP_LOCALES__)\n    const body = shallowRef<HTMLElement>()\n    const { height: bodyHeight } = useElementSize(body)\n    const { height: windowHeight } = useWindowSize()\n\n    /** Scroll distance */\n    const { y } = useWindowScroll()\n\n    /** Whether to display button */\n    const show = computed(\n      () =>\n        pageFrontmatter.value.backToTop !== false &&\n        y.value > __BACK_TO_TOP_THRESHOLD__,\n    )\n\n    const progress = computed(\n      () => (y.value / (bodyHeight.value - windowHeight.value)) * 100,\n    )\n\n    onMounted(() => {\n      body.value = document.body\n    })\n\n    return () =>\n      h(Transition, { name: 'back-to-top' }, () =>\n        show.value\n          ? h(\n              'button',\n              {\n                'type': 'button',\n                'class': 'vp-back-to-top-button',\n                'aria-label': locale.value.backToTop,\n                'onClick': () => {\n                  window.scrollTo({ top: 0, behavior: 'smooth' })\n                },\n              },\n              [\n                __BACK_TO_TOP_PROGRESS__\n                  ? h(\n                      'span',\n                      {\n                        'class': 'vp-scroll-progress',\n                        'role': 'progressbar',\n                        'aria-labelledby': 'loadinglabel',\n                        'aria-valuenow': progress.value,\n                      },\n                      h(\n                        'svg',\n                        h('circle', {\n                          'cx': '26',\n                          'cy': '26',\n                          'r': '24',\n                          'fill': 'none',\n                          'stroke': 'currentColor',\n                          'stroke-width': '4',\n                          'stroke-dasharray': `${\n                            Math.PI * progress.value * 0.48\n                          } ${Math.PI * (100 - progress.value) * 0.48}`,\n                        }),\n                      ),\n                    )\n                  : null,\n                h('div', { class: 'back-to-top-icon' }),\n              ],\n            )\n          : null,\n      )\n  },\n})\n"],"names":["BackToTop","defineComponent","pageFrontmatter","usePageFrontmatter","locale","useLocaleConfig","body","shallowRef","bodyHeight","useElementSize","windowHeight","useWindowSize","y","useWindowScroll","show","computed","progress","onMounted","h","Transition"],"mappings":"gVAoBO,MAAMA,EAAYC,EAAgB,CACvC,KAAM,YAEN,OAAQ,CACN,MAAMC,EAAkBC,IAClBC,EAASC,EAAgB,uBAAuB,EAChDC,EAAOC,EAAAA,EACP,CAAE,OAAQC,CAAW,EAAIC,EAAeH,CAAI,EAC5C,CAAE,OAAQI,CAAa,EAAIC,IAG3B,CAAE,EAAAC,CAAE,EAAIC,IAGRC,EAAOC,EACX,IACEb,EAAgB,MAAM,YAAc,IACpCU,EAAE,MAAQ,yBACd,EAEMI,EAAWD,EACf,IAAOH,EAAE,OAASJ,EAAW,MAAQE,EAAa,OAAU,GAC9D,EAEA,OAAAO,EAAU,IAAM,CACdX,EAAK,MAAQ,SAAS,IACxB,CAAC,EAEM,IACLY,EAAEC,EAAY,CAAE,KAAM,aAAc,EAAG,IACrCL,EAAK,MACDI,EACE,SACA,CACE,KAAQ,SACR,MAAS,wBACT,aAAcd,EAAO,MAAM,UAC3B,QAAW,IAAM,CACf,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,QAAS,CAAC,CAChD,CACF,EACA,CACE,yBACIc,EACE,OACA,CACE,MAAS,qBACT,KAAQ,cACR,kBAAmB,eACnB,gBAAiBF,EAAS,KAC5B,EACAE,EACE,MACAA,EAAE,SAAU,CACV,GAAM,KACN,GAAM,KACN,EAAK,KACL,KAAQ,OACR,OAAU,eACV,eAAgB,IAChB,mBAAoB,GAClB,KAAK,GAAKF,EAAS,MAAQ,GAC7B,IAAI,KAAK,IAAM,IAAMA,EAAS,OAAS,GAAI,EAC7C,CAAC,CACH,CACF,EACA,KACJE,EAAE,MAAO,CAAE,MAAO,kBAAmB,CAAC,CACxC,CACF,EACA,IACN,CACJ,CACF,CAAC"}