---
title: Hive 类 SQL 语法
order: 3
icon: ant-design:cluster-outlined
date: 2025-04-14 10:00:00
tags:
  - 大数据
  - Hive
categories:
  - 大数据
---

:::info

**Hive** 是构建在 **Hadoop 生态系统**之上的 **数据仓库工具**，主要用于处理和分析海量结构化数据（通常为 TB/PB 级）。它的核心价值是通过 **类 SQL 语法（HiveQL）** 简化分布式计算的复杂性，让用户无需编写底层 MapReduce/Spark 代码即可操作大数据。

**Hive 本身是一个灵活的数据仓库工具，并不严格绑定在某一层，而是可以根据需求在多个层次（ODS、DWD、DWS、DIM）中使用**。

:::

## 一、Hive 的核心特性

:::tip

1. Hive **不是传统数据库**，而是一个将 **HDFS 文件映射为结构化表** 的抽象层。

2. Hive 的本质是 **SQL 到分布式任务的翻译器**（如 MapReduce、Tez、Spark）。

:::

Hive 中存储的**实际数据文件**默认位于 **HDFS（Hadoop 分布式文件系统）**上，但 Hive 的**元数据**（如表结构、分区信息等）则存储在独立的**关系型数据库**（如 MySQL、PostgreSQL）中。

核心功能：

- 数据存储：数据以文件形式（如 CSV、ORC、Parquet）存储在 HDFS 或云存储（如 S3）中。
- 元数据管理：表结构、分区等信息通过独立的关系型数据库（如 MySQL）管理。
- 查询翻译：将 HiveQL 转换为分布式计算任务，依赖 Hadoop/YARN 或 Spark 执行。

Hive 的数据存储结构：

|     **组件**     |                         **存储内容**                         |                    **存储位置**                    |
| :--------------: | :----------------------------------------------------------: | :------------------------------------------------: |
|    **元数据**    |      表结构（字段、类型）、分区信息、存储路径、权限等。      |     **独立的关系型数据库**（如 MySQL、Derby）      |
| **实际数据文件** | 用户表中的具体数据，以文件形式（如 CSV、ORC、Parquet）存在。 | **HDFS 的指定路径**（默认 `/user/hive/warehouse`） |



## 二、Hive 与 传统数据库的区别

|   **特性**   |                  **Hive**                  |      **传统数据库（如 MySQL）**      |
| :----------: | :----------------------------------------: | :----------------------------------: |
| **数据存储** | 数据以文件形式存储在 HDFS/云存储，无索引。 | 数据按页存储，支持 B+ 树索引等优化。 |
| **计算模型** |  分布式任务（MapReduce/Tez/Spark）执行。   |  单机或主从架构，直接操作本地存储。  |
| **事务支持** |      有限支持（需手动配置 ACID 表）。      |           完整 ACID 事务。           |
|   **延迟**   |          分钟到小时级（批处理）。          |         毫秒到秒级（实时）。         |
| **适用场景** |      离线分析、数据清洗、大规模聚合。      |        高频事务、低延迟查询。        |



## 三、数据加载到 Hive 表中

1. 直接关联 HDFS 路径：若 HDFS 数据已存放到 Hive 表的存储路径（如 `/user/hive/warehouse/sales`），Hive 会自动读取数据，无需额外操作。

2. 手动加载数据：使用 `LOAD DATA` 命令将 HDFS 文件加载到 Hive 表：

```sql
LOAD DATA INPATH '/user/hdfs/sales.csv' INTO TABLE sales;
```

- 此操作会将 HDFS 文件移动到 Hive 表的存储目录中（原始文件被删除）。
- 若需保留原文件，使用 `EXTERNAL TABLE` 并直接关联路径。



